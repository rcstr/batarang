!function(){window.AcornsTest=Ember.Application.create()}(),function(){AcornsTest.ApplicationController=Ember.ObjectController.extend({content:{},actions:{search:function(){"use strict";var a=this.get("s");this.transitionToRoute("stocks.search",{symbol:a})}.observes("s")}})}(),function(){AcornsTest.StocksController=Ember.ObjectController.extend({})}(),function(){AcornsTest.ApplicationAdapter=DS.FixtureAdapter,AcornsTest.Config={quandl:{APIKEY:"bFBuqoqc8VsgKasxCHfX",TOKENQUERY:"auth_token="+this.APIKEY,URL:"http://www.quandl.com/api/v1/datasets"}}}(),function(){AcornsTest.Stock=DS.Model.extend({source_code:DS.attr("string"),code:DS.attr("string"),name:DS.attr("string"),description:DS.attr("string"),display_url:DS.attr("string"),source_name:DS.attr("string"),data:DS.attr(null,{defaultValue:[]})}),AcornsTest.Stock.FIXTURES=[]}(),function(){AcornsTest.ApplicationRoute=Ember.Route.extend({})}(),function(){AcornsTest.StockRoute=Ember.Route.extend({model:function(a){"use strict";var b,c=AcornsTest.Config.quandl.URL+"/"+a.source_code+"/"+a.code+".json",d=this,e=a.source_code+a.code,f=this.store.getById("stock",e);return f&&f.get("data").length?f:(Ember.$.getJSON(c,{auth_token:AcornsTest.Config.quandl.APIKEY}).then(function(a){f?(f.set("data",a.data),console.log(f.get("data")),b=f):b=d.store.createRecord("stock",{id:e,source_code:a.source_code,code:a.code,name:a.name,description:a.description,display_url:a.display_url,source_name:a.source_name,data:a.data})}),b)}})}(),function(){AcornsTest.StocksSearchRoute=Ember.Route.extend({model:function(a){"use strict";var b=AcornsTest.Config.quandl.URL+".json",c=[],d=this;return Ember.$.getJSON(b,{query:a.symbol,auth_token:AcornsTest.Config.quandl.APIKEY}).then(function(a){a.docs.forEach(function(a){var b=a.source_code+a.code,e=d.store.getById("stock",b);c.pushObject(e?e:d.store.createRecord("stock",{id:b,source_code:a.source_code,code:a.code,name:a.name,description:a.description,display_url:a.display_url,source_name:a.source_name}))})}),c}})}(),function(){AcornsTest.StockView=Ember.View.extend({})}(),function(){AcornsTest.Router.map(function(){"use strict";this.resource("stocks",function(){this.route("search",{path:"/search/:symbol"}),this.resource("stock",{path:"/:source_code/:code"})})})}();