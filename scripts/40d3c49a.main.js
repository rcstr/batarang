!function(){window.AcornsTest=Ember.Application.create()}(),function(){AcornsTest.ApplicationController=Ember.ObjectController.extend({content:{},actions:{search:function(a){"use strict";this.transitionToRoute("stocks.search",a)}}})}(),function(){AcornsTest.StockController=Ember.ObjectController.extend({init:function(){"use strict";return this._super()},timeframeOptions:function(){"use strict";return[{name:"1 Month",value:"1|m"},{name:"3 Months",value:"3|m"},{name:"6 Months",value:"6|m"},{name:"1 Year",value:"1|y"}]}.property(),timeframeSelected:null,chartInfo:{x:"x",columns:[["x"],[""]]},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}},timeframeObserver:function(){"use strict";var a=this.get("timeframeSelected").value,b=this.get("model").get("data"),c=this._generateChartInfo(a,b);this.set("chartInfo",c)}.observes("timeframeSelected"),_generateChartInfo:function(a,b){"use strict";function c(a){var b=a.split("|"),c=b[0],d=b[1],e=new Date;return"m"===d&&e.setMonth(e.getMonth()-c),"y"===d&&e.setYear(e.getFullYear()-c),e}a=c(a);var d=this.get("model").get("name");return function(){var c=["x"],e=[d];return Ember.$.each(b,function(b,d){var f=new Date(d[0]);f>a&&(c.push(d[0]),e.push(d[1]))}),{x:"x",columns:[c,e]}}()}})}(),function(){AcornsTest.StocksController=Ember.ObjectController.extend({})}(),function(){AcornsTest.ApplicationAdapter=DS.FixtureAdapter,AcornsTest.Config={quandl:{APIKEY:"bFBuqoqc8VsgKasxCHfX",TOKENQUERY:"auth_token="+this.APIKEY,URL:"http://www.quandl.com/api/v1/datasets"}}}(),function(){AcornsTest.Stock=DS.Model.extend({source_code:DS.attr("string"),code:DS.attr("string"),name:DS.attr("string"),description:DS.attr("string"),display_url:DS.attr("string"),source_name:DS.attr("string"),data:DS.attr(null,{defaultValue:[]})}),AcornsTest.Stock.FIXTURES=[]}(),function(){AcornsTest.ApplicationRoute=Ember.Route.extend({})}(),function(){AcornsTest.StockRoute=Ember.Route.extend({model:function(a){"use strict";var b=a.slug.split("|"),c=AcornsTest.Config.quandl.URL+"/"+b[0]+"/"+b[1]+".json",d=this.store.getById("stock",b[1]),e=new Date,f=new Date,g=this;return f.setFullYear(e.getFullYear()-1),e=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate(),f=f.getFullYear()+"-"+f.getMonth()+"-"+f.getDate(),d&&d.get("data").length?d:Ember.$.getJSON(c,{trim_start:f,trim_end:e,auth_token:AcornsTest.Config.quandl.APIKEY}).then(function(a){return d?d.set("data",a.data):g.store.createRecord("stock",{id:a.code,source_code:a.source_code,code:a.code,name:a.name,description:a.description,display_url:a.display_url,source_name:a.source_name,data:a.data,slug:a.source_code+"|"+a.code})})}})}(),function(){AcornsTest.StocksSearchRoute=Ember.Route.extend({model:function(a){"use strict";var b=AcornsTest.Config.quandl.URL+".json",c=[],d=this;return Ember.$.getJSON(b,{query:a.symbol,auth_token:AcornsTest.Config.quandl.APIKEY}).then(function(a){a.docs.forEach(function(a){var b=d.store.getById("stock",a.code);c.pushObject(b?b:d.store.createRecord("stock",{id:a.code,source_code:a.source_code,code:a.code,name:a.name,description:a.description,display_url:a.display_url,source_name:a.source_name,slug:a.source_code+"|"+a.code}))})}),c}})}(),function(){AcornsTest.StockView=Ember.View.extend({didInsertElement:function(){"use strict"}})}(),function(){AcornsTest.Router.map(function(){"use strict";this.resource("stocks",function(){this.route("search",{path:"/search/:symbol"}),this.resource("stock",{path:"/:slug"})})})}();